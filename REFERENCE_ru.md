# Уровни абстракции (модули).
- `library` - подлежающий глобальному переписпользованию код.
- `system` - сетевой протокол и все технические детали реализации проекта.
- `logic` - уровень абстракции над техническим слоем. Позволяет управлять персонажем.
- `ai` - уровень сложного поведения. Обеспечивает управление классами персонажей.
- `script` - библиотека entry-point скрипта. Облегчает запуск конкретных игроков.


# Типы данных.

## Модуль `system`.

### Структура `connection` : `struct?`.
Содержит все технические данные игровой сессии, а так же структуру `world`.  
Большинство функций API принимают эту структуру в качестве параметра.

### Тип `packet` : `alist?`.
Базовый фрагмент данных, пригодный для сериализации и передачи по сети.

## Модуль `logic`.

### Структура `world` : `struct?`.
Содержит все данные игрового мира. Соответствует игровому серверу.

Поля:
- `objects`
- `me`
- `inventory`
- `shortcuts`
- `skills`
- `quests`
- `party`
- `clans`
- `alliances`

### Тип `event` : `list?`.
Базовое событие. Отражает всё происходящее с игровым миром. Может инициироваться системным или прикладным кодом.

### Тип `object` : `alist?` (абстрактный).
Любой физический объект игрового мира.

### Тип `creature` < `object` (абстрактный).
Одушевлённый объект (персонаж).

### Тип `npc` < `creature`.
Внутриигровой персонаж.

### Тип `character` < `creature` (абстрактный).
Управляемый человеком персонаж.

### Тип `antagonist` < `character`.
Чужой персонаж.

### Тип `protagonist` < `character`.
Ваш персонаж (игрок).

### Структура `inventory` : `hash?`.
Содержит множество `item`. Обычно инвентарь персонажа.

### Тип `item` < `object`.
Вещь на земле или в инвентаре.

### Структура `shortcuts` : `vector?`.
Панель быстрого доступа игрока.

### Тип `skill` : `alist?`.
Умение игрока.

### Тип `gesture` : `symbol?`.
Жест игрока.


# Игровые операции (actions).

### Функция `connect(string? host, string? port)` → `connection?`.
Установка соединения с login-сервером. Возвращает игровую сессию.

### Функция `login(connection?, string? login, string? password)` → `(list world? ...)`.
Авторизация на login-сервере. Возвращает список game-серверов.

### Функция `select-server(connection?, server?)` → `(list protagonist? ...)`.
Выбор game-сервера. Возвращает список персонажей аккаунта.

### Функция `select-character(connection?, protagonist?)` → `evt?`.
Выбор игрового персонажа. Возвращает контекст синхронизации с игровыми событиями.

TODO...


# Игровые события (events).

### Событие `logout`.
Подтверждение завершения игровой сессии.

### Событие `disconnect`.
Разрыв соединения.

TODO...
